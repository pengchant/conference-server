(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3cb1"],{"3ULD":function(e,t,n){"use strict";var r=n("sFn2");n.n(r).a},"4LaD":function(e,t,n){"use strict";var r={},o=function(e,t){var n="1.23452384164.123412415";if(void 0!==t){if(null!==document.getElementById(n)){var r=document.getElementById(n);r.parentNode.removeChild(r)}var o=t.offsetWidth,i=t.offsetHeight;t.style.position="relative";var a=document.createElement("canvas");a.width=390,a.height=200;var d=a.getContext("2d");d.rotate(-20*Math.PI/180),d.font="20px Vedana",d.fillStyle="rgba(200, 200, 200, 0.20)",d.textAlign="left",d.textBaseline="Middle",d.fillText(e,0,4*a.height/5);var s=document.createElement("div");return s.id=n,s.style.pointerEvents="none",s.style.top="0px",s.style.left="0px",s.style.position="absolute",s.style.zIndex="1000000",s.style.width=o+"px",s.style.height=i+"px",s.style.background="url("+a.toDataURL("image/png")+") left top repeat",t.appendChild(s),n}};r.set=function(e,t){var n=o(e,t);setInterval(function(){null===document.getElementById(n)&&(n=o(e,t))},500),window.onresize=function(){o(e,t)}},t.a=r},DkQT:function(e,t,n){"use strict";var r=n("ptYj"),o={name:"MRecorder",props:{timelimit:{default:60,type:Number},pushurl:{default:"",type:String}},data:function(){return{mcounter:0,recording:!1,intervaltimerid:"",tiptext:"点击录音",mediaRecorder:null,mediaConstraints:{audio:!0}}},methods:{handleClick:function(){var e=this,t=this;this.recording=!this.recording,!0===this.recording?(this.mcounter=0,this.tiptext="录音中 "+this.mcounter+"s",this.captureRecord(),this.intervaltimerid=setInterval(function(){t.mcounter=t.mcounter+1,e.tiptext="录音中 "+t.mcounter+"s"},1e3)):(this.tiptext="点击录音",this.mediaRecorder.stop(),this.mediaRecorder.stream.stop())},onMediaError:function(e){console.log("阿偶~您的浏览器貌似不支持录音哦...",e),clearInterval(this.intervaltimerid),this.tiptext="点击录音",this.recording=!1,this.$message.error("您的浏览器暂不支持录音功能")},onMediaSuccess:function(e){this.mediaRecorder=new r.a(e),this.mediaRecorder.stream=e,this.mediaRecorder.mimeType="audio/wav";var t=this;this.mediaRecorder.ondataavailable=function(e){clearInterval(t.intervaltimerid);var n=URL.createObjectURL(e);t.$emit("handleStop",{url:n,mblob:e})},this.mediaRecorder.start(1e3*this.timelimit)},captureRecord:function(){navigator.mediaDevices.getUserMedia(this.mediaConstraints).then(this.onMediaSuccess).catch(this.onMediaError)}}},i=(n("3ULD"),n("KHd+")),a=Object(i.a)(o,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"wrapper"},[t("el-row",[t("el-col",[t("svg-icon",{class:["mrecorder",{anirecorder:this.recording}],attrs:{"icon-class":1==this.recording?"ly_s1":"ly_s0"},on:{click:this.handleClick}})],1)],1),this._v(" "),t("el-row",[t("el-col",[t("span",{staticClass:"tip"},[this._v(this._s(this.tiptext))])])],1)],1)},[],!1,null,"41b209a1",null);a.options.__file="index.vue";t.a=a.exports},QrNZ:function(e,t,n){"use strict";n.d(t,"g",function(){return o}),n.d(t,"f",function(){return i}),n.d(t,"e",function(){return a}),n.d(t,"r",function(){return d}),n.d(t,"i",function(){return s}),n.d(t,"b",function(){return u}),n.d(t,"d",function(){return c}),n.d(t,"c",function(){return h}),n.d(t,"h",function(){return l}),n.d(t,"a",function(){return f}),n.d(t,"k",function(){return p}),n.d(t,"q",function(){return m}),n.d(t,"m",function(){return v}),n.d(t,"o",function(){return g}),n.d(t,"n",function(){return b}),n.d(t,"l",function(){return w}),n.d(t,"s",function(){return y}),n.d(t,"j",function(){return O}),n.d(t,"p",function(){return A}),n.d(t,"t",function(){return T});var r=n("t3Un");function o(e){return Object(r.a)({url:"/order/queryrooms",method:"post",data:e})}function i(e){return Object(r.a)({url:"/order/queryconfroom/"+e,method:"post"})}function a(e){return Object(r.a)({url:"/order/querypeoples",method:"post",data:e})}function d(e){return Object(r.a)({url:"/order/sureSubOrder",method:"post",data:e})}function s(e){return Object(r.a)({url:"/record/"+e+"/loadconf",method:"post"})}function u(e){return Object(r.a)({url:"/record/"+e+"/exportconfcoll",method:"post",responseType:"blob"})}function c(e){return Object(r.a)({url:"/record/"+e+"/exportconfrecord",method:"post",responseType:"blob"})}function h(e){return Object(r.a)({url:"/record/"+e+"/exportDirconfrecord",method:"post",responseType:"blob"})}function l(e){return Object(r.a)({url:"/record/"+e+"/getAttendursts",method:"post"})}function f(e){return Object(r.a)({url:"/order/addNewRoom",method:"post",data:e})}function p(e){return Object(r.a)({url:"/order/modifyRoom",method:"post",data:e})}function m(e){return Object(r.a)({url:"/order/"+e+"/removeConfRoom",method:"post"})}function v(e){return Object(r.a)({url:"/order/queryorderedconf",method:"post",data:e})}function g(e){return Object(r.a)({url:"/order/"+e+"/queryorderdetail",method:"post"})}function b(e){return Object(r.a)({url:"/order/queryvaliconf",method:"post",data:e})}function w(e){return Object(r.a)({url:"/order/"+e+"/passOrderConf",method:"post"})}function y(e){return Object(r.a)({url:"/order/"+e+"/unpassOrderConf",method:"post"})}function O(e){return Object(r.a)({url:"/comm/getcurdepusr/"+e,method:"post"})}function A(e){return Object(r.a)({url:"/order/"+e+"/removeOrderConf",method:"post"})}function T(e){return Object(r.a)({url:"/order/"+e+"/flagInConference",method:"post"})}},"V+NQ":function(e,t,n){"use strict";n.d(t,"i",function(){return d}),n.d(t,"o",function(){return s}),n.d(t,"u",function(){return u}),n.d(t,"p",function(){return c}),n.d(t,"h",function(){return h}),n.d(t,"j",function(){return l}),n.d(t,"n",function(){return f}),n.d(t,"q",function(){return p}),n.d(t,"c",function(){return m}),n.d(t,"g",function(){return v}),n.d(t,"b",function(){return g}),n.d(t,"f",function(){return b}),n.d(t,"e",function(){return w}),n.d(t,"l",function(){return y}),n.d(t,"t",function(){return O}),n.d(t,"r",function(){return A}),n.d(t,"m",function(){return T}),n.d(t,"a",function(){return M}),n.d(t,"d",function(){return R}),n.d(t,"k",function(){return C}),n.d(t,"s",function(){return k});var r=n("t3Un"),o=n("vDqi"),i=n.n(o),a=n("QDog").a.BASEURL;function d(e){return Object(r.a)({url:"/record/addUsrSepach",method:"post",data:e})}function s(e){return Object(r.a)({url:"/record/"+e.recorid+"/removeUsrSpeach",method:"post"})}function u(e,t){var n=new FormData;n.append("voice",e.voice);var r=a+"/record/"+e.confrecid+"/uploadUsrVoice";i.a.post(r,n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){console.log(e.data),t(e.data)})}function c(e){return Object(r.a)({url:"/record/"+e.voiceid+"/deleteUsrRecords",method:"post"})}function h(e){return Object(r.a)({url:"/record/modifyUsrSpeach",method:"post",data:e})}function l(e){return Object(r.a)({url:"/record/addNewCurContTitle",method:"post",data:e})}function f(e){return Object(r.a)({url:"/record/"+e.workerid+"/loadCurIssue",method:"post"})}function p(e){return Object(r.a)({url:"/record/saveConfConclusion",method:"post",data:e})}function m(e){return{url:a+"/record/getUsrVoice?file_id="+e,mblob:null}}function v(e){return Object(r.a)({url:"/record/modifyHolder",data:e,method:"post"})}function g(e){return Object(r.a)({url:"/order/"+e+"/endRecConf",method:"post"})}function b(e){return Object(r.a)({url:"/record/getvaliRecord",method:"post",data:e})}function w(e){return Object(r.a)({url:"/record/getmyvaliRecord",method:"post",data:e})}function y(e){return Object(r.a)({url:"/record/"+e+"/passRecord",method:"post",data:e})}function O(e){return Object(r.a)({url:"/record/"+e+"/unpassRecord",method:"post",data:e})}function A(e){return Object(r.a)({url:"/record/modifyConclusion",method:"post",data:e})}function T(e){return Object(r.a)({url:"/record/"+e+"/queryConftitles",method:"post"})}function M(e){return Object(r.a)({url:"/record/directrecord",method:"post",data:e})}function R(e){return Object(r.a)({url:"/record/"+e+"/querydirectconf",method:"post"})}function C(e){return Object(r.a)({url:"/record/"+e+"/passconfrecord",method:"post"})}function k(e){return Object(r.a)({url:"/record/"+e+"/unpassconfrecord",method:"post"})}},iCc5:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},ptYj:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var r=n("EJiy"),o=n.n(r),i=function(e){if(!e)throw"MediaStream is mandatory.";var t;this.start=function(n){var r;"undefined"!=typeof MediaRecorder?r=g:(h||c||u)&&(-1!==this.mimeType.indexOf("video")?r=y:-1!==this.mimeType.indexOf("audio")&&(r=b)),"image/gif"===this.mimeType&&(r=A),"audio/wav"!==this.mimeType&&"audio/pcm"!==this.mimeType||(r=b),this.recorderType&&(r=this.recorderType),(t=new r(e)).blobs=[];var o=this;t.ondataavailable=function(e){t.blobs.push(e),o.ondataavailable(e)},t.onstop=this.onstop,t.onStartedDrawingNonBlankFrames=this.onStartedDrawingNonBlankFrames,(t=function(e,t){for(var n in t)"function"!=typeof t[n]&&(e[n]=t[n]);return e}(t,this)).start(n)},this.onStartedDrawingNonBlankFrames=function(){},this.clearOldRecordedFrames=function(){t&&t.clearOldRecordedFrames()},this.stop=function(){t&&t.stop()},this.ondataavailable=function(e){console.log("ondataavailable..",e)},this.onstop=function(e){console.warn("stopped..",e)},this.save=function(e,n){if(e)f(e,n);else{if(!t)return;ConcatenateBlobs(t.blobs,t.blobs[0].type,function(e){f(e)})}},this.pause=function(){t&&(t.pause(),console.log("Paused recording.",this.mimeType||t.mimeType))},this.resume=function(){t&&(t.resume(),console.log("Resumed recording.",this.mimeType||t.mimeType))},this.recorderType=null,this.mimeType="video/webm",this.disableLogs=!1};void 0!==i&&(i.MultiStreamRecorder=function(e){if(!e)throw"MediaStream is mandatory.";var t,n,r=this,o=v();this.stream=e,this.start=function(s){for(var u in t=new i(e),n=new i(e),t.mimeType="audio/ogg",n.mimeType="video/webm",this)"function"!=typeof this[u]&&(t[u]=n[u]=this[u]);function c(e){d++,r.ondataavailable(e)}t.ondataavailable=function(e){a[d]||(a[d]={}),a[d].audio=e,a[d].video&&!a[d].onDataAvailableEventFired&&(a[d].onDataAvailableEventFired=!0,c(a[d]))},n.ondataavailable=function(e){if(o)return r.ondataavailable({video:e,audio:e});a[d]||(a[d]={}),a[d].video=e,a[d].audio&&!a[d].onDataAvailableEventFired&&(a[d].onDataAvailableEventFired=!0,c(a[d]))},n.onstop=t.onstop=function(e){r.onstop(e)},o?n.start(s):(n.onStartedDrawingNonBlankFrames=function(){n.clearOldRecordedFrames(),t.start(s)},n.start(s))},this.stop=function(){t&&t.stop(),n&&n.stop()},this.ondataavailable=function(e){console.log("ondataavailable..",e)},this.onstop=function(e){console.warn("stopped..",e)},this.pause=function(){t&&t.pause(),n&&n.pause()},this.resume=function(){t&&t.resume(),n&&n.resume()};var a={},d=0});var a,d="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";!function(t){"undefined"==typeof window&&("undefined"==typeof window&&void 0!==e&&(e.navigator={userAgent:d,getUserMedia:function(){}},t.window=e),"undefined"==typeof document&&(t.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){return{}}),"undefined"==typeof location&&(t.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(t.screen={width:0,height:0}))}(void 0!==e?e:window),void 0===(a=window.AudioContext)&&("undefined"!=typeof webkitAudioContext&&(a=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(a=mozAudioContext)),"undefined"==typeof window&&(window={}),void 0===(a=window.AudioContext)&&("undefined"!=typeof webkitAudioContext&&(a=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(a=mozAudioContext));var s=window.URL;void 0===s&&"undefined"!=typeof webkitURL&&(s=webkitURL),"undefined"!=typeof navigator?(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia)):navigator={getUserMedia:function(){},userAgent:d};var u=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob),c=!1;"undefined"!=typeof opera&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("OPR/")&&(c=!0);var h=!u&&!u&&!!navigator.webkitGetUserMedia,l=window.MediaStream;function f(e,t){if(!e)throw"Blob object is required.";if(!e.type)try{e.type="video/webm"}catch(e){}var n=(e.type||"video/webm").split("/")[1];if(t&&-1!==t.indexOf(".")){var r=t.split(".");t=r[0],n=r[1]}var o=(t||Math.round(9999999999*Math.random())+888888888)+"."+n;if(void 0!==navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(e,o);if(void 0!==navigator.msSaveBlob)return navigator.msSaveBlob(e,o);var i=document.createElement("a");i.href=s.createObjectURL(e),i.target="_blank",i.download=o,navigator.mozGetUserMedia&&(i.onclick=function(){(document.body||document.documentElement).removeChild(i)},(document.body||document.documentElement).appendChild(i));var a=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});i.dispatchEvent(a),navigator.mozGetUserMedia||s.revokeObjectURL(i.href)}function p(e){if(0===e)return"0 Bytes";var t=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return(e/Math.pow(1e3,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][t]}void 0===l&&"undefined"!=typeof webkitMediaStream&&(l=webkitMediaStream),void 0!==l&&("getVideoTracks"in l.prototype||(l.prototype.getVideoTracks=function(){if(!this.getTracks)return[];var e=[];return this.getTracks.forEach(function(t){-1!==t.kind.toString().indexOf("video")&&e.push(t)}),e},l.prototype.getAudioTracks=function(){if(!this.getTracks)return[];var e=[];return this.getTracks.forEach(function(t){-1!==t.kind.toString().indexOf("audio")&&e.push(t)}),e}),"stop"in l.prototype||(l.prototype.stop=function(){this.getAudioTracks().forEach(function(e){e.stop&&e.stop()}),this.getVideoTracks().forEach(function(e){e.stop&&e.stop()})})),"undefined"!=typeof location&&0===location.href.indexOf("file:")&&console.error("Please load this HTML file on HTTP or HTTPS.");var m={AudioContext:a};function v(){var e=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t=!!window.chrome&&!e;if(void 0!==window.InstallTrigger)return!0;if(!t)return!1;navigator.appVersion;var n,r,o=navigator.userAgent,i=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10);return t&&(n=o.indexOf("Chrome"),i=o.substring(n+7)),-1!==(r=i.indexOf(";"))&&(i=i.substring(0,r)),-1!==(r=i.indexOf(" "))&&(i=i.substring(0,r)),a=parseInt(""+i,10),isNaN(a)&&(i=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10)),a>=49}m={AudioContext:window.AudioContext||window.webkitAudioContext};function g(e){var t,n=this;this.start=function(r,o){var i;(n.mimeType||(n.mimeType="video/webm"),-1!==n.mimeType.indexOf("audio"))&&(e.getVideoTracks().length&&e.getAudioTracks().length&&(navigator.mozGetUserMedia?(i=new l).addTrack(e.getAudioTracks()[0]):i=new l(e.getAudioTracks()),e=i));-1!==n.mimeType.indexOf("audio")&&(n.mimeType=h?"audio/webm":"audio/ogg"),n.dontFireOnDataAvailableEvent=!1;var a={mimeType:n.mimeType};n.disableLogs||o||console.log("Passing following params over MediaRecorder API.",a),t&&(t=null),h&&!v()&&(a="video/vp8");try{t=new MediaRecorder(e,a)}catch(n){t=new MediaRecorder(e)}"canRecordMimeType"in t&&!1===t.canRecordMimeType(n.mimeType)&&(n.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",n.mimeType)),t.ignoreMutedMedia=n.ignoreMutedMedia||!1;var d=!1;t.ondataavailable=function(e){if(!n.dontFireOnDataAvailableEvent&&e.data&&e.data.size&&!(e.data.size<26800)&&!d){d=!0;var o=n.getNativeBlob?e.data:new Blob([e.data],{type:n.mimeType||"video/webm"});n.ondataavailable(o),n.dontFireOnDataAvailableEvent=!0,t&&(t.stop(),t=null),n.start(r,"__disableLogs")}},t.onerror=function(e){n.disableLogs||("InvalidState"===e.name?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed."):"OutOfMemory"===e.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute."):"IllegalStreamModification"===e.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute."):"OtherRecordingError"===e.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute."):"GenericError"===e.name?console.error("The UA cannot provide the codec or recording option that has been requested.",e):console.error("MediaRecorder Error",e)),t&&"inactive"!==t.state&&"stopped"!==t.state&&t.stop()};try{t.start(36e5)}catch(e){t=null}setTimeout(function(){t&&"recording"===t.state&&t.requestData()},r)},this.stop=function(e){t&&"recording"===t.state&&(t.requestData(),setTimeout(function(){n.dontFireOnDataAvailableEvent=!0,t&&"recording"===t.state&&t.stop(),t=null},2e3))},this.pause=function(){t&&"recording"===t.state&&t.pause()},this.ondataavailable=function(e){console.log("recorded-blob",e)},this.resume=function(){if(this.dontFireOnDataAvailableEvent){this.dontFireOnDataAvailableEvent=!1;var e=n.disableLogs;return n.disableLogs=!0,this.record(),void(n.disableLogs=e)}t&&"paused"===t.state&&t.resume()},this.clearRecordedData=function(){t&&(this.pause(),this.dontFireOnDataAvailableEvent=!0,this.stop())},function r(){t&&(!1!==function(){if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}()?setTimeout(r,1e3):n.stop())}()}function b(e){var t,n;this.start=function(r){r=r||1e3,(t=new w(e,this)).record(),n=setInterval(function(){t.requestData()},r)},this.stop=function(){t&&(t.stop(),clearTimeout(n))},this.pause=function(){t&&t.pause()},this.resume=function(){t&&t.resume()},this.ondataavailable=function(){}}function w(e,t){var n;m.AudioContextConstructor||(m.AudioContextConstructor=new m.AudioContext),n=m.AudioContextConstructor.sampleRate;var r,o=[],i=[],a=!1,d=0,s=t.sampleRate||n,u=(t.mimeType||"audio/wav").indexOf("audio/pcm")>-1,c=t.audioChannels||2;function h(e,t){for(var n=new Float32Array(t),r=0,o=e.length,i=0;i<o;i++){var a=e[i];n.set(a,r),r+=a.length}return n}function l(e,t,n){for(var r=n.length,o=0;o<r;o++)e.setUint8(t+o,n.charCodeAt(o))}this.record=function(){a=!0,o.length=i.length=0,d=0},this.requestData=function(){if(!y)if(0!==d){w=!0;var e=o.slice(0),n=i.slice(0),r=d;o.length=i.length=[],d=0,w=!1;var a=h(e,r),f=a;if(2===c)f=function(e,t){for(var n=e.length+t.length,r=new Float32Array(n),o=0,i=0;i<n;)r[i++]=e[o],r[i++]=t[o],o++;return r}(a,h(n,r));if(u){var m=new Blob([function(e){var t=e.length,n=new Int16Array(t);for(;t--;)n[t]=65535*e[t];return n.buffer}(f)],{type:"audio/pcm"});return console.debug("audio recorded blob size:",p(m.size)),void t.ondataavailable(m)}var v=new ArrayBuffer(44+2*f.length),g=new DataView(v);l(g,0,"RIFF"),g.setUint32(4,44+2*f.length-8,!0),l(g,8,"WAVE"),l(g,12,"fmt "),g.setUint32(16,16,!0),g.setUint16(20,1,!0),g.setUint16(22,c,!0),g.setUint32(24,s,!0),g.setUint32(28,s*c*2,!0),g.setUint16(32,2*c,!0),g.setUint16(34,16,!0),l(g,36,"data"),g.setUint32(40,2*f.length,!0);for(var b=f.length,O=44,A=0;A<b;A++)g.setInt16(O,32767*f[A],!0),O+=2;m=new Blob([g],{type:"audio/wav"});console.debug("audio recorded blob size:",p(m.size)),t.ondataavailable(m)}else w=!1},this.stop=function(){a=!1,this.requestData(),v.disconnect()};var f=m.AudioContextConstructor;m.VolumeGainNode=f.createGain();var v,g=m.VolumeGainNode;m.AudioInput=f.createMediaStreamSource(e),(v=m.AudioInput).connect(g);var b=t.bufferSize||2048;if(0===t.bufferSize&&(b=0),f.createJavaScriptNode)r=f.createJavaScriptNode(b,c,c);else{if(!f.createScriptProcessor)throw"WebAudio API has no support on this browser.";r=f.createScriptProcessor(b,c,c)}b=r.bufferSize,console.debug("using audio buffer-size:",b);var w=!1;window.scriptprocessornode=r,1===c&&console.debug("All right-channels are skipped.");var y=!1;this.pause=function(){y=!0},this.resume=function(){y=!1},r.onaudioprocess=function(e){if(a&&!w&&!y){var t=e.inputBuffer.getChannelData(0);if(o.push(new Float32Array(t)),2===c){var n=e.inputBuffer.getChannelData(1);i.push(new Float32Array(n))}d+=b}},g.connect(r),r.connect(f.destination)}function y(e){var t,n;this.start=function(r){for(var o in r=r||1e3,t=new O(e,this),this)"function"!=typeof this[o]&&(t[o]=this[o]);t.record(),n=setInterval(function(){t.requestData()},r)},this.stop=function(){t&&(t.stop(),clearTimeout(n))},this.clearOldRecordedFrames=function(){t&&t.clearOldRecordedFrames()},this.pause=function(){t&&t.pause()},this.resume=function(){t&&t.resume()},this.ondataavailable=function(){}}function O(e,t){this.record=function(n){this.width||(this.width=320),this.height||(this.height=240),this.video&&this.video instanceof HTMLVideoElement&&(this.width||(this.width=a.videoWidth||a.clientWidth||320),this.height||(this.height=a.videoHeight||a.clientHeight||240)),this.video||(this.video={width:this.width,height:this.height}),this.canvas&&this.canvas.width&&this.canvas.height||(this.canvas={width:this.width,height:this.height}),c.width=this.canvas.width,c.height=this.canvas.height,this.video&&this.video instanceof HTMLVideoElement?(this.isHTMLObject=!0,a=this.video.cloneNode()):((a=document.createElement("video")).src=s.createObjectURL(e),a.width=this.video.width,a.height=this.video.height),a.muted=!0,a.play(),d=(new Date).getTime(),u=new T.Video(t.speed,t.quality),console.log("canvas resolutions",c.width,"*",c.height),console.log("video width/height",a.width||c.width,"*",a.height||c.height),o()},this.clearOldRecordedFrames=function(){u.frames=[]};var n=!1;this.requestData=function(){if(!f)if(u.frames.length){n=!0;var e=u.frames.slice(0);u.frames=function(e,t,n,r){var o=document.createElement("canvas");o.width=c.width,o.height=c.height;for(var i=o.getContext("2d"),a=[],d=-1===t,s=t&&t>0&&t<=e.length?t:e.length,u={r:0,g:0,b:0},h=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),l=n&&n>=0&&n<=1?n:0,f=r&&r>=0&&r<=1?r:0,p=!1,m=0;m<s;m++){var v,g,b;if(!p){var w=new Image;w.src=e[m].image,i.drawImage(w,0,0,c.width,c.height);var y=i.getImageData(0,0,c.width,c.height);v=0,g=y.data.length,b=y.data.length/4;for(var O=0;O<g;O+=4){var A={r:y.data[O],g:y.data[O+1],b:y.data[O+2]},T=Math.sqrt(Math.pow(A.r-u.r,2)+Math.pow(A.g-u.g,2)+Math.pow(A.b-u.b,2));T<=h*l&&v++}}!p&&b-v<=b*f||(d&&(p=!0),a.push(e[m]))}(a=a.concat(e.slice(s))).length<=0&&a.push(e[e.length-1]);return a}(e,-1),u.compile(function(e){t.ondataavailable(e),console.debug("video recorded blob size:",p(e.size))}),u.frames=[],n=!1}else n=!1};var r=!1;function o(){if(f)return d=(new Date).getTime(),void setTimeout(o,500);if(!i){if(n)return setTimeout(o,100);var e=(new Date).getTime()-d;if(!e)return o();d=(new Date).getTime(),!l.isHTMLObject&&a.paused&&a.play(),h.drawImage(a,0,0,c.width,c.height),i||u.frames.push({duration:e,image:c.toDataURL("image/webp")}),r||function(e,t,n){var r=document.createElement("canvas");r.width=c.width,r.height=c.height;var o,i,a,d=r.getContext("2d"),s={r:0,g:0,b:0},u=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),h=t&&t>=0&&t<=1?t:0,l=n&&n>=0&&n<=1?n:0,f=new Image;f.src=e.image,d.drawImage(f,0,0,c.width,c.height);var p=d.getImageData(0,0,c.width,c.height);o=0,i=p.data.length,a=p.data.length/4;for(var m=0;m<i;m+=4){var v={r:p.data[m],g:p.data[m+1],b:p.data[m+2]},g=Math.sqrt(Math.pow(v.r-s.r,2)+Math.pow(v.g-s.g,2)+Math.pow(v.b-s.b,2));g<=u*h&&o++}return!(a-o<=a*l)}(u.frames[u.frames.length-1])||(r=!0,t.onStartedDrawingNonBlankFrames()),setTimeout(o,10)}}var i=!1;this.stop=function(){i=!0,this.requestData()};var a,d,u,c=document.createElement("canvas"),h=c.getContext("2d"),l=this;var f=!1;this.pause=function(){f=!0},this.resume=function(){f=!1}}function A(e){if("undefined"==typeof GIFEncoder)throw"Please link: https://cdn.webrtc-experiment.com/gif-recorder.js";function t(){Date.now();var e=new Blob([new Uint8Array(c.stream().bin)],{type:"image/gif"});r.ondataavailable(e),c.stream().bin=[]}this.start=function(e){e=e||1e3;var r=this.videoWidth||320,s=this.videoHeight||240;i.width=d.width=r,i.height=d.height=s,(c=new GIFEncoder).setRepeat(0),c.setDelay(this.frameRate||this.speed||200),c.setQuality(this.quality||1),c.start(),Date.now(),l=requestAnimationFrame(function e(t){n?setTimeout(e,500,t):(l=requestAnimationFrame(e),void 0===(void 0===u?"undefined":o()(u))&&(u=t),t-u<90||(d.paused&&d.play(),a.drawImage(d,0,0,r,s),c.addFrame(a),u=t))}),h=setTimeout(t,e)},this.stop=function(){l&&(cancelAnimationFrame(l),clearTimeout(h),t())};var n=!1;this.pause=function(){n=!0},this.resume=function(){n=!1},this.ondataavailable=function(){},this.onstop=function(){};var r=this,i=document.createElement("canvas"),a=i.getContext("2d"),d=document.createElement("video");d.muted=!0,d.autoplay=!0,d.src=s.createObjectURL(e),d.play();var u,c,h,l=null}void 0!==i&&(i.MediaRecorderWrapper=g),void 0!==i&&(i.StereoAudioRecorder=b),void 0!==i&&(i.StereoAudioRecorderHelper=w),void 0!==i&&(i.WhammyRecorder=y),void 0!==i&&(i.WhammyRecorderHelper=O),void 0!==i&&(i.GifRecorder=A);var T=function(){function e(e,t){this.frames=[],e||(e=1),this.duration=1e3/e,this.quality=t||.8}function t(e){function t(e,t,n){return[{data:e,id:231}].concat(n.map(function(e){var n=function(e){var t=0;e.keyframe&&(t|=128);e.invisible&&(t|=8);e.lacing&&(t|=e.lacing<<1);e.discardable&&(t|=1);if(e.trackNum>127)throw"TrackNumber > 127 not supported";return[128|e.trackNum,e.timecode>>8,255&e.timecode,t].map(function(e){return String.fromCharCode(e)}).join("")+e.frame}({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(t)});return t+=e.duration,{data:n,id:163}}))}function n(e){for(var t=[];e>0;)t.push(255&e),e>>=8;return new Uint8Array(t.reverse())}function r(e){return new Uint8Array(e.split("").map(function(e){return e.charCodeAt(0)}))}function i(e){var t=[];e=(e.length%8?new Array(9-e.length%8).join("0"):"")+e;for(var n=0;n<e.length;n+=8)t.push(parseInt(e.substr(n,8),2));return new Uint8Array(t)}function a(e,t){return parseInt(e.substr(t+4,4).split("").map(function(e){var t=e.charCodeAt(0).toString(2);return new Array(8-t.length+1).join("0")+t}).join(""),2)}var d=new function(e){var a=function(e){if(e[0]){for(var t=e[0].width,n=e[0].height,r=e[0].duration,o=1;o<e.length;o++)r+=e[o].duration;return{duration:r,width:t,height:n}}postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."})}(e);if(!a)return[];for(var d=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:function(e){return[].slice.call(new Uint8Array(new Float64Array([e]).buffer),0).map(function(e){return String.fromCharCode(e)}).reverse().join("")}(a.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:a.width,id:176},{data:a.height,id:186}]}]}]}]}],s=0,u=0;s<e.length;){var c=[],h=0;do{c.push(e[s]),h+=e[s].duration,s++}while(s<e.length&&h<3e4);var l={id:524531317,data:t(u,0,c)};d[1].data.push(l),u+=h}return function e(t){for(var a=[],d=0;d<t.length;d++){var s=t[d].data;"object"===(void 0===s?"undefined":o()(s))&&(s=e(s)),"number"==typeof s&&(s=i(s.toString(2))),"string"==typeof s&&(s=r(s));var u=s.size||s.byteLength||s.length,c=Math.ceil(Math.ceil(Math.log(u)/Math.log(2))/8),h=u.toString(2),l=new Array(7*c+7+1-h.length).join("0")+h,f=new Array(c).join("0")+"1"+l;a.push(n(t[d].id)),a.push(i(f)),a.push(s)}return new Blob(a,{type:"video/webm"})}(d)}(e.map(function(e){var t=function(e){for(var t=e.RIFF[0].WEBP[0],n=t.indexOf("*"),r=0,o=[];r<4;r++)o[r]=t.charCodeAt(n+3+r);return{width:16383&(o[1]<<8|o[0]),height:16383&(o[3]<<8|o[2]),data:t,riff:e}}(function e(t){for(var n=0,r={};n<t.length;){var o=t.substr(n,4),i=a(t,n),d=t.substr(n+4+4,i);n+=8+i,r[o]=r[o]||[],"RIFF"===o||"LIST"===o?r[o].push(e(d)):r[o].push(d)}return r}(atob(e.image.slice(23))));return t.duration=e.duration,t}));postMessage(d)}return e.prototype.add=function(e,t){if("canvas"in e&&(e=e.canvas),"toDataURL"in e&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:t||this.duration})},e.prototype.compile=function(e){var n=function(e){var t=s.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (e) {"+e.name+"(e.data);}"],{type:"application/javascript"})),n=new Worker(t);return s.revokeObjectURL(t),n}(t);n.onmessage=function(t){t.data.error?console.error(t.data.error):e(t.data)},n.postMessage(this.frames)},{Video:e}}();void 0!==i&&(i.Whammy=T),window.ConcatenateBlobs=function(e,t,n){var r=[],o=0;!function i(){if(!e[o])return function(){var e=0;r.forEach(function(t){e+=t.byteLength});var o=new Uint16Array(e),i=0;r.forEach(function(e){var t=e.byteLength;t%2!=0&&(e=e.slice(0,t-1)),o.set(new Uint16Array(e),i),i+=t});var a=new Blob([o.buffer],{type:t});n(a)}();var a=new FileReader;a.onload=function(e){r.push(e.target.result),o++,i()},a.readAsArrayBuffer(e[o])}()}}).call(this,n("yLpj"))},sFn2:function(e,t,n){}}]);